{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useRef } from 'react'; // import ReactQuill from 'react-quill';\n\nimport Link from 'next/link';\nimport Head from 'next/head';\nimport Router from 'next/router';\nimport fetch from 'isomorphic-unfetch';\nimport dateformat from 'dateformat';\nimport { useCookies } from 'react-cookie';\nimport { useRouter } from 'next/router';\nimport AdminLayout from '../../../components/AdminLayout';\nimport MainNav from '../../../components/AdminMainNav';\nvar POST_API = \"https://gwh3ump9m0.execute-api.us-east-2.amazonaws.com/prod/api/posts\";\n\nvar AdminSinglePost = function AdminSinglePost(props) {\n  var _useState = useState(\"\"),\n      title = _useState[0],\n      setTitle = _useState[1];\n\n  var _useState2 = useState(null),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(false),\n      isLoading = _useState3[0],\n      setIsLoading = _useState3[1];\n\n  var _useCookies = useCookies(['token']),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      setCookie = _useCookies2[1];\n\n  var router = useRouter();\n\n  var handleDelete = function handleDelete() {\n    console.log(\"delete\");\n    setIsLoading(true);\n    var token = cookies['token'];\n    var API = POST_API + \"/\".concat(props.data.id);\n    console.log(\"this is the update api \", API);\n    fetch(API, {\n      method: 'DELETE',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      },\n      body: JSON.stringify({\n        title: title\n      })\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      console.log(data);\n      router.push('/admin/posts');\n      setIsLoading(false);\n    })[\"catch\"](function (error) {\n      setIsLoading(false);\n      console.log(error);\n    });\n  };\n\n  var handleEdit = function handleEdit(e) {\n    e.preventDefault();\n    Router.push(\"/admin/editPost?id=\".concat(props.data.id));\n  };\n\n  return __jsx(AdminLayout, {\n    sidebar: true\n  }, __jsx(\"main\", {\n    className: \"jsx-1607622671\" + \" \" + \"main-content col-lg-10 col-md-9 col-sm-12 p-0 offset-lg-2 offset-md-3\"\n  }, __jsx(MainNav, null), __jsx(\"div\", {\n    className: \"jsx-1607622671\" + \" \" + \"main-content-container container-fluid px-4\"\n  }, error == null ? \"\" : __jsx(\"div\", {\n    role: \"alert\",\n    className: \"jsx-1607622671\" + \" \" + \"alert alert-danger\"\n  }, error), __jsx(\"div\", {\n    className: \"jsx-1607622671\" + \" \" + \"page-header row no-gutters py-4\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1607622671\" + \" \" + \"col-12 text-center text-sm-left mb-0\"\n  }, __jsx(\"span\", {\n    className: \"jsx-1607622671\" + \" \" + \"text-uppercase page-subtitle\"\n  }, \"Blog\"), __jsx(\"h3\", {\n    className: \"jsx-1607622671\" + \" \" + \"page-title\"\n  }, props.data.title))), __jsx(\"div\", {\n    className: \"jsx-1607622671\" + \" \" + \"row\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1607622671\" + \" \" + \"col-lg-9 col-md-12\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1607622671\" + \" \" + \"card card-small mb-3\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1607622671\" + \" \" + \"card-body\"\n  }, __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: props.data.content\n    },\n    className: \"jsx-1607622671\"\n  })))), __jsx(\"div\", {\n    className: \"jsx-1607622671\" + \" \" + \"col-lg-3 col-md-12\"\n  }, __jsx(\"div\", {\n    className: \"jsx-1607622671\" + \" \" + 'card card-small mb-3'\n  }, __jsx(\"div\", {\n    className: \"jsx-1607622671\" + \" \" + \"card-header border-bottom\"\n  }, __jsx(\"h6\", {\n    className: \"jsx-1607622671\" + \" \" + \"m-0\"\n  }, \"Actions\")), __jsx(\"div\", {\n    className: \"jsx-1607622671\" + \" \" + 'card-body p-0'\n  }, __jsx(\"ul\", {\n    className: \"jsx-1607622671\" + \" \" + \"list-group list-group-flush\"\n  }, __jsx(\"li\", {\n    className: \"jsx-1607622671\" + \" \" + \"list-group-item p-3\"\n  }, __jsx(\"span\", {\n    className: \"jsx-1607622671\" + \" \" + \"d-flex mb-2\"\n  }, __jsx(\"i\", {\n    className: \"jsx-1607622671\" + \" \" + \"material-icons mr-1\"\n  }, \"flag\"), __jsx(\"strong\", {\n    className: \"jsx-1607622671\" + \" \" + \"mr-1\"\n  }, \"Status:\"), \" Draft\", __jsx(\"div\", {\n    className: \"jsx-1607622671\" + \" \" + \"custom-control custom-checkbox mb-1 ml-auto\"\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    id: \"draft\",\n    className: \"jsx-1607622671\" + \" \" + \"custom-control-input\"\n  }), __jsx(\"label\", {\n    htmlFor: \"draft\",\n    className: \"jsx-1607622671\" + \" \" + \"custom-control-label\"\n  }))), __jsx(\"span\", {\n    className: \"jsx-1607622671\" + \" \" + \"d-flex mb-2\"\n  }, __jsx(\"i\", {\n    className: \"jsx-1607622671\" + \" \" + \"material-icons mr-1\"\n  }, \"visibility\"), __jsx(\"strong\", {\n    className: \"jsx-1607622671\" + \" \" + \"mr-1\"\n  }, \"Visibility:\"), __jsx(\"strong\", {\n    className: \"jsx-1607622671\" + \" \" + \"text-success\"\n  }, \"Public\"), __jsx(\"div\", {\n    className: \"jsx-1607622671\" + \" \" + \"custom-control custom-checkbox mb-1 ml-auto\"\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    id: \"visibility\",\n    className: \"jsx-1607622671\" + \" \" + \"custom-control-input\"\n  }), __jsx(\"label\", {\n    htmlFor: \"visibility\",\n    className: \"jsx-1607622671\" + \" \" + \"custom-control-label\"\n  }))), __jsx(\"span\", {\n    className: \"jsx-1607622671\" + \" \" + \"d-flex mb-2\"\n  }, __jsx(\"i\", {\n    className: \"jsx-1607622671\" + \" \" + \"material-icons mr-1\"\n  }, \"calendar_today\"), __jsx(\"strong\", {\n    className: \"jsx-1607622671\" + \" \" + \"mr-1\"\n  }, \"Schedule:\"), \" Now\", __jsx(\"div\", {\n    className: \"jsx-1607622671\" + \" \" + \"custom-control custom-checkbox mb-1 ml-auto\"\n  }, __jsx(\"input\", {\n    type: \"checkbox\",\n    id: \"schedule\",\n    className: \"jsx-1607622671\" + \" \" + \"custom-control-input\"\n  }), __jsx(\"label\", {\n    htmlFor: \"schedule\",\n    className: \"jsx-1607622671\" + \" \" + \"custom-control-label\"\n  }))), __jsx(\"span\", {\n    className: \"jsx-1607622671\" + \" \" + \"d-flex\"\n  }, __jsx(\"i\", {\n    className: \"jsx-1607622671\" + \" \" + \"material-icons mr-1\"\n  }, \"score\"), __jsx(\"strong\", {\n    className: \"jsx-1607622671\" + \" \" + \"mr-1\"\n  }, \"Readability:\"), __jsx(\"strong\", {\n    className: \"jsx-1607622671\" + \" \" + \"text-warning\"\n  }, \"Ok\"))), __jsx(\"li\", {\n    className: \"jsx-1607622671\" + \" \" + \"list-group-item d-flex px-3\"\n  }, __jsx(\"button\", {\n    \"data-toggle\": \"modal\",\n    \"data-target\": \"#exampleModal\",\n    className: \"jsx-1607622671\" + \" \" + \"btn btn-sm btn-outline-danger\"\n  }, __jsx(\"i\", {\n    className: \"jsx-1607622671\" + \" \" + \"material-icons\"\n  }, \"save\"), \" Delete\"), __jsx(\"button\", {\n    onClick: handleEdit,\n    className: \"jsx-1607622671\" + \" \" + \"btn btn-sm btn-accent ml-auto\"\n  }, __jsx(\"i\", {\n    className: \"jsx-1607622671\" + \" \" + \"material-icons\"\n  }, \"file_copy\"), \" Edit\")))))))), __jsx(\"div\", {\n    \"class\": \"modal fade\",\n    id: \"exampleModal\",\n    tabindex: \"-1\",\n    role: \"dialog\",\n    \"aria-labelledby\": \"exampleModalLabel\",\n    \"aria-hidden\": \"true\",\n    className: \"jsx-1607622671\"\n  }, __jsx(\"div\", {\n    \"class\": \"modal-dialog\",\n    className: \"jsx-1607622671\"\n  }, __jsx(\"div\", {\n    \"class\": \"modal-content\",\n    className: \"jsx-1607622671\"\n  }, __jsx(\"div\", {\n    \"class\": \"modal-header\",\n    className: \"jsx-1607622671\"\n  }, __jsx(\"h5\", {\n    \"class\": \"modal-title\",\n    id: \"exampleModalLabel\",\n    className: \"jsx-1607622671\"\n  }, \"Are you sure you want to delete?\"), __jsx(\"button\", {\n    type: \"button\",\n    \"class\": \"close\",\n    \"data-dismiss\": \"modal\",\n    \"aria-label\": \"Close\",\n    className: \"jsx-1607622671\"\n  }, __jsx(\"span\", {\n    \"aria-hidden\": \"true\",\n    className: \"jsx-1607622671\"\n  }, \"\\xD7\"))), __jsx(\"div\", {\n    \"class\": \"modal-body\",\n    className: \"jsx-1607622671\"\n  }, props.data.title), __jsx(\"div\", {\n    \"class\": \"modal-footer\",\n    className: \"jsx-1607622671\"\n  }, __jsx(\"button\", {\n    type: \"button\",\n    \"class\": \"btn btn-outline-success\",\n    \"data-dismiss\": \"modal\",\n    className: \"jsx-1607622671\"\n  }, \"Cancel\"), __jsx(\"button\", {\n    type: \"button\",\n    \"class\": \"btn btn-outline-danger\",\n    onClick: handleDelete,\n    className: \"jsx-1607622671\"\n  }, \"Delete\"))))), __jsx(\"footer\", {\n    className: \"jsx-1607622671\" + \" \" + \"main-footer d-flex p-2 px-3 bg-white border-top\"\n  }, __jsx(\"ul\", {\n    className: \"jsx-1607622671\" + \" \" + \"nav\"\n  }, __jsx(\"li\", {\n    className: \"jsx-1607622671\" + \" \" + \"nav-item\"\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"jsx-1607622671\" + \" \" + \"nav-link\"\n  }, \"Home\")), __jsx(\"li\", {\n    className: \"jsx-1607622671\" + \" \" + \"nav-item\"\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"jsx-1607622671\" + \" \" + \"nav-link\"\n  }, \"Services\")), __jsx(\"li\", {\n    className: \"jsx-1607622671\" + \" \" + \"nav-item\"\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"jsx-1607622671\" + \" \" + \"nav-link\"\n  }, \"About\")), __jsx(\"li\", {\n    className: \"jsx-1607622671\" + \" \" + \"nav-item\"\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"jsx-1607622671\" + \" \" + \"nav-link\"\n  }, \"Products\")), __jsx(\"li\", {\n    className: \"jsx-1607622671\" + \" \" + \"nav-item\"\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"jsx-1607622671\" + \" \" + \"nav-link\"\n  }, \"Blog\"))), __jsx(\"span\", {\n    className: \"jsx-1607622671\" + \" \" + \"copyright ml-auto my-auto mr-2\"\n  }, \"Copyright \\xA9 2018\", __jsx(\"a\", {\n    href: \"https://designrevision.com\",\n    rel: \"nofollow\",\n    className: \"jsx-1607622671\"\n  }, \"DesignRevision\")))), __jsx(_JSXStyle, {\n    id: \"1607622671\"\n  }, []));\n};\n\nAdminSinglePost.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n    var id, res, data;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            id = context.query.id;\n            _context.next = 3;\n            return fetch(\"https://gwh3ump9m0.execute-api.us-east-2.amazonaws.com/prod/api/posts/\".concat(id));\n\n          case 3:\n            res = _context.sent;\n            _context.next = 6;\n            return res.json();\n\n          case 6:\n            data = _context.sent;\n            console.log(\"Fetched post: \".concat(data.title));\n            return _context.abrupt(\"return\", {\n              data: data\n            });\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default AdminSinglePost;","map":null,"metadata":{},"sourceType":"module"}