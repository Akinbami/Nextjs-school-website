{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useRef } from 'react'; // import ReactQuill from 'react-quill';\n\nimport Link from 'next/link';\nimport Head from 'next/head';\nimport LoadingOverlay from 'react-loading-overlay';\nimport { useCookies } from 'react-cookie';\nimport { useRouter } from 'next/router';\nimport { Base64 } from 'js-base64';\nimport AdminLayout from '../../components/AdminLayout'; // import 'react-quill/dist/quill.snow.css'\n\nconst LOGIN_API = \"https://gwh3ump9m0.execute-api.us-east-2.amazonaws.com/prod/api/login\"; // const cookies = new Cookies();\n\nconst Login = () => {\n  const {\n    0: username,\n    1: setUsername\n  } = useState(\"\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState(null);\n  const [cookies, setCookie] = useCookies(['token']);\n  const router = useRouter();\n\n  const handleChange = value => {\n    console.log(\"value \", value);\n    setContent(value);\n  };\n\n  const login = () => {\n    if (username == \"\" || password == \"\") {\n      console.log(username, password);\n      setError(\"please complete the form and try again\");\n    } else {\n      console.log(\"username and password \", username, password);\n      setIsLoading(true);\n      fetch(LOGIN_API, {\n        method: 'POST',\n        headers: {\n          \"Authorization\": `Basic ${Base64.encode(`${username}:${password}`)}`\n        }\n      }).then(response => response.json()).then(data => {\n        console.log(data);\n\n        if (data.status) {\n          let token = data.access_token;\n          setCookie('token', token);\n          setError(null);\n          router.push('/admin/posts');\n        } else {\n          setIsLoading(false);\n          setError(data.message); // setIsLoading(false)\n        }\n      }).catch(error => {\n        setIsLoading(false);\n        console.log(error);\n      });\n    }\n  };\n\n  return __jsx(LoadingOverlay, {\n    active: isLoading,\n    spinner: true,\n    text: \"Loading your content...\"\n  }, __jsx(AdminLayout, {\n    sidebar: false\n  }, __jsx(\"div\", {\n    className: \"jsx-2786593315\" + \" \" + \" w-100 d-flex justify-content-center\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2786593315\" + \" \" + \"auth-card\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2786593315\" + \" \" + \"card card-small mb-4\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2786593315\" + \" \" + \"card-header border-bottom text-center\"\n  }, __jsx(\"h6\", {\n    className: \"jsx-2786593315\" + \" \" + \"m-0\"\n  }, \"Login\")), __jsx(\"div\", {\n    className: \"jsx-2786593315\" + \" \" + \"login-group w-50 mx-auto\"\n  }, error !== null ? __jsx(\"div\", {\n    role: \"alert\",\n    className: \"jsx-2786593315\" + \" \" + \"alert alert-danger\"\n  }, error) : \"\", __jsx(\"form\", {\n    className: \"jsx-2786593315\"\n  }, __jsx(\"strong\", {\n    className: \"jsx-2786593315\" + \" \" + \"text-muted d-block mb-2\"\n  }, \"Username\"), __jsx(\"div\", {\n    className: \"jsx-2786593315\" + \" \" + \"input-group mb-3\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2786593315\" + \" \" + \"input-group-prepend\"\n  }, __jsx(\"span\", {\n    className: \"jsx-2786593315\" + \" \" + \"input-group-text\"\n  }, \"@\")), __jsx(\"input\", {\n    type: \"text\",\n    onChange: e => setUsername(e.target.value),\n    \"aria-label\": \"Username\",\n    \"aria-describedby\": \"basic-addon1\",\n    className: \"jsx-2786593315\" + \" \" + \"form-control\"\n  })), __jsx(\"strong\", {\n    className: \"jsx-2786593315\" + \" \" + \"text-muted d-block mb-2\"\n  }, \"Password\"), __jsx(\"div\", {\n    className: \"jsx-2786593315\" + \" \" + \"input-group mb-3\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2786593315\" + \" \" + \"input-group input-group-seamless\"\n  }, __jsx(\"input\", {\n    type: \"password\",\n    onChange: e => setPassword(e.target.value),\n    id: \"password\",\n    className: \"jsx-2786593315\" + \" \" + \"form-control\"\n  }), __jsx(\"span\", {\n    className: \"jsx-2786593315\" + \" \" + \"input-group-append\"\n  }, __jsx(\"span\", {\n    className: \"jsx-2786593315\" + \" \" + \"input-group-text\"\n  }, __jsx(\"i\", {\n    className: \"jsx-2786593315\" + \" \" + \"material-icons\"\n  }, \"lock\"))))), __jsx(\"div\", {\n    className: \"jsx-2786593315\" + \" \" + \"float-right\"\n  }, __jsx(\"button\", {\n    type: \"button\",\n    onClick: () => login(),\n    class: \"mb-2 btn btn-sm btn-primary mr-1\",\n    className: \"jsx-2786593315\"\n  }, \"Submit\")), __jsx(\"p\", {\n    className: \"jsx-2786593315\"\n  }, \"Don't have an Account! \", __jsx(\"a\", {\n    href: \"/register\",\n    className: \"jsx-2786593315\"\n  }, \"Sign Up Here\")), __jsx(\"p\", {\n    className: \"jsx-2786593315\"\n  }, \"Forgot \", __jsx(\"a\", {\n    href: \"#\",\n    className: \"jsx-2786593315\"\n  }, \"Password?\"))))))), __jsx(_JSXStyle, {\n    id: \"2786593315\"\n  }, [\".auth-card.jsx-2786593315{width:30rem;margin-top:10rem;margin-bottom:10rem;}\", \".login-group.jsx-2786593315{padding-top:10%;padding-bottom:10%;}\"])));\n};\n\nexport default Login;","map":null,"metadata":{},"sourceType":"module"}