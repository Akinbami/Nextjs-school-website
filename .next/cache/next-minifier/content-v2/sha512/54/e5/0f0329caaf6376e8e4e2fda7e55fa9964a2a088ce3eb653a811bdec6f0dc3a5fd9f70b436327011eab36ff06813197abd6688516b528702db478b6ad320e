{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{FBZP:function(e,t,a){\"use strict\";a.r(t);var s=a(\"o0o1\"),o=a.n(s),n=a(\"HaE+\"),l=a(\"ODXe\"),i=a(\"MX0m\"),c=a.n(i),r=a(\"q1tI\"),m=a.n(r),u=(a(\"YFqc\"),a(\"8Kt/\"),a(\"a6RD\")),d=a.n(u),p=a(\"I5XY\"),g=a.n(p),f=a(\"r5vi\"),x=a(\"Ma5Y\"),b=a.n(x),h=a(\"vcXL\"),j=a.n(h),N=a(\"nOHt\"),v=a.n(N),k=a(\"hJmc\"),y=a(\"Cix5\"),w=m.a.createElement,C=(a(\"rmP6\"),d()((function(){return Promise.resolve().then(a.t.bind(null,\"rmP6\",7))}),{ssr:!1,loading:function(){return w(\"p\",null,\"Loading ...\")},loadableGenerated:{webpack:function(){return[\"rmP6\"]},modules:[\"react-quill\"]}})),O=\"https://gwh3ump9m0.execute-api.us-east-2.amazonaws.com/prod/api/posts\",I=function(e){var t=Object(r.useState)(e.blogItem.title),a=t[0],s=t[1],o=Object(r.useState)(e.blogItem.content),n=o[0],i=o[1],m=Object(r.useState)(e.blogItem.category),u=m[0],d=m[1],p=Object(r.useState)(e.blogItem.image_url),x=p[0],b=p[1],h=Object(r.useState)(e.blogItem.is_draft),I=h[0],z=h[1],P=Object(r.useState)(e.blogItem.is_published),_=P[0],S=P[1],D=Object(r.useState)(!1),U=D[0],B=D[1],T=Object(r.useState)(null),q=T[0],A=T[1],E=Object(f.a)([\"token\"]),R=Object(l.a)(E,2),F=R[0],L=(R[1],Object(N.useRouter)());Object(r.useEffect)((function(){0==e.loggedIn&&(window.location.href=\"/admin/login\")}));return w(g.a,{active:U,spinner:!0,text:\"Loading your content...\"},w(k.a,{sidebar:!0},w(\"main\",{className:\"jsx-2430398980 main-content col-lg-10 col-md-9 col-sm-12 p-0 offset-lg-2 offset-md-3\"},w(y.a,null),w(\"div\",{className:\"jsx-2430398980 main-content-container container-fluid px-4\"},null==q?\"\":w(\"div\",{role:\"alert\",className:\"jsx-2430398980 alert alert-danger\"},q),w(\"div\",{className:\"jsx-2430398980 page-header row no-gutters py-4\"},w(\"div\",{className:\"jsx-2430398980 col-12 col-sm-4 text-center text-sm-left mb-0\"},w(\"span\",{className:\"jsx-2430398980 text-uppercase page-subtitle\"},\"Update Post\"),w(\"h3\",{className:\"jsx-2430398980 page-title\"},a))),w(\"div\",{className:\"jsx-2430398980 row\"},w(\"div\",{className:\"jsx-2430398980 col-lg-9 col-md-12\"},w(\"div\",{className:\"jsx-2430398980 card card-small mb-3\"},w(\"div\",{className:\"jsx-2430398980 card-body\"},w(\"form\",{className:\"jsx-2430398980 add-new-post\"},w(\"input\",{type:\"text\",defaultValue:a,placeholder:a,onChange:function(e){return s(e.target.value)},className:\"jsx-2430398980 form-control form-control-lg mb-3\"}),w(\"div\",{className:\"jsx-2430398980 add-new-post__editor mb-1\"},w(C,{modules:{toolbar:[[{header:\"1\"},{header:\"2\"},{font:[]}],[{size:[]}],[\"bold\",\"italic\",\"underline\",\"strike\",\"blockquote\"],[{list:\"ordered\"},{list:\"bullet\"},{indent:\"-1\"},{indent:\"+1\"}],[\"link\",\"image\",\"video\"],[\"clean\"]],clipboard:{matchVisual:!1}},formats:[\"header\",\"font\",\"size\",\"bold\",\"italic\",\"underline\",\"strike\",\"blockquote\",\"list\",\"bullet\",\"indent\",\"link\",\"image\",\"video\"],theme:\"snow\",defaultValue:n,onChange:function(e){console.log(\"value \",e),i(e)}})),w(\"div\",{className:\"jsx-2430398980 form-group files color\"},w(\"label\",{className:\"jsx-2430398980\"},\"Upload Your Image \"),w(\"input\",{\"data-required\":\"image\",type:\"file\",multiple:\"\",onChange:function(e){e.preventDefault(),console.log(e.target.files[0].name),console.log(e.target.files[0].type);var t=e.target.files[0],a=new FileReader;a.addEventListener(\"loadend\",(function(e){j()(\"https://z2evkvjux4.execute-api.us-east-2.amazonaws.com/prod/requestUploadURL\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:t.name,type:t.type})}).then((function(e){return e.json()})).then((function(e){console.log(e);var s=\"https://slsuploadabi.s3.us-east-2.amazonaws.com/\"+t.name;return console.log(\"image location after post \",s),b(s),j()(e.uploadURL,{method:\"PUT\",body:new Blob([a.result],{type:t.type})})})).catch((function(e){B(!1),console.log(e)}))})),a.readAsArrayBuffer(t)},className:\"jsx-2430398980 form-control\"})))))),w(\"div\",{className:\"jsx-2430398980 col-lg-3 col-md-12\"},w(\"div\",{className:\"jsx-2430398980 card card-small mb-3\"},w(\"div\",{className:\"jsx-2430398980 card-header border-bottom\"},w(\"h6\",{className:\"jsx-2430398980 m-0\"},\"Categories\")),w(\"div\",{className:\"jsx-2430398980 card-body p-0\"},w(\"ul\",{className:\"jsx-2430398980 list-group list-group-flush\"},w(\"li\",{className:\"jsx-2430398980 list-group-item px-3 pb-2\"},w(\"fieldset\",{className:\"jsx-2430398980\"},w(\"div\",{className:\"jsx-2430398980 form-check custom-radio mb-1\"},w(\"input\",{type:\"radio\",name:\"category\",onChange:function(e){return d(e.target.value)},id:\"Uncategorized\",value:\"Uncategorized\",className:\"jsx-2430398980 form-check-input\"}),w(\"label\",{for:\"Uncategorized\",className:\"jsx-2430398980 form-check-label\"},\"Uncategorized\")),w(\"div\",{className:\"jsx-2430398980 form-check custom-radio mb-1\"},w(\"input\",{type:\"radio\",name:\"category\",onChange:function(e){return d(e.target.value)},id:\"Design\",value:\"Design\",className:\"jsx-2430398980 form-check-input\"}),w(\"label\",{for:\"Design\",className:\"jsx-2430398980 form-check-label\"},\"Design\")),w(\"div\",{className:\"jsx-2430398980 form-check custom-radio mb-1\"},w(\"input\",{type:\"radio\",name:\"category\",onChange:function(e){return d(e.target.value)},id:\"Development\",value:\"Development\",className:\"jsx-2430398980 form-check-input\"}),w(\"label\",{for:\"Development\",className:\"jsx-2430398980 form-check-label\"},\"Development\")),w(\"div\",{className:\"jsx-2430398980 form-check custom-radio mb-1\"},w(\"input\",{type:\"radio\",name:\"category\",onChange:function(e){return d(e.target.value)},id:\"Writing\",value:\"Writing\",className:\"jsx-2430398980 form-check-input\"}),w(\"label\",{for:\"Writing\",className:\"jsx-2430398980 form-check-label\"},\"Writing\")),w(\"div\",{className:\"jsx-2430398980 form-check custom-radio mb-1\"},w(\"input\",{type:\"radio\",name:\"category\",onChange:function(e){return d(e.target.value)},id:\"Books\",value:\"Books\",className:\"jsx-2430398980 form-check-input\"}),w(\"label\",{for:\"Books\",className:\"jsx-2430398980 form-check-label\"},\"Books\"))))))),w(\"div\",{className:\"jsx-2430398980 card card-small mb-3\"},w(\"div\",{className:\"jsx-2430398980 card-header border-bottom\"},w(\"h6\",{className:\"jsx-2430398980 m-0\"},\"Actions\")),w(\"div\",{className:\"jsx-2430398980 card-body p-0\"},w(\"ul\",{className:\"jsx-2430398980 list-group list-group-flush\"},w(\"li\",{className:\"jsx-2430398980 list-group-item p-3\"},w(\"span\",{className:\"jsx-2430398980 d-flex mb-2\"},w(\"i\",{className:\"jsx-2430398980 material-icons mr-1\"},\"flag\"),w(\"strong\",{className:\"jsx-2430398980 mr-1\"},\"Status:\"),\" Draft\",w(\"div\",{className:\"jsx-2430398980 custom-control custom-checkbox mb-1 ml-auto\"},w(\"input\",{type:\"checkbox\",defaultValue:I,onChange:function(e){return z(e.target.value)},id:\"draft\",className:\"jsx-2430398980 custom-control-input\"}),w(\"label\",{htmlFor:\"draft\",className:\"jsx-2430398980 custom-control-label\"}))),w(\"span\",{className:\"jsx-2430398980 d-flex mb-2\"},w(\"i\",{className:\"jsx-2430398980 material-icons mr-1\"},\"calendar_today\"),w(\"strong\",{className:\"jsx-2430398980 mr-1\"},\"Schedule:\"),\" Now\",w(\"div\",{className:\"jsx-2430398980 custom-control custom-checkbox mb-1 ml-auto\"},w(\"input\",{type:\"checkbox\",defaultValue:_,onChange:function(e){return S(e.target.value)},id:\"schedule\",className:\"jsx-2430398980 custom-control-input\"}),w(\"label\",{htmlFor:\"schedule\",className:\"jsx-2430398980 custom-control-label\"}))),w(\"span\",{className:\"jsx-2430398980 d-flex\"},w(\"i\",{className:\"jsx-2430398980 material-icons mr-1\"},\"score\"),w(\"strong\",{className:\"jsx-2430398980 mr-1\"},\"Readability:\"),w(\"strong\",{className:\"jsx-2430398980 text-warning\"},\"Ok\"))),w(\"li\",{className:\"jsx-2430398980 list-group-item d-flex px-3\"},w(\"button\",{onClick:function(){v.a.push(\"/admin/posts\")},className:\"jsx-2430398980 btn btn-sm btn-outline-accent\"},w(\"i\",{className:\"jsx-2430398980 material-icons\"},\"save\"),\" Cancel\"),w(\"button\",{onClick:function(){console.log(\"cookies \",F),console.log(\"this is the image location: \",x);var t=F.token;if(\"\"==a||\"\"==n)console.log(\"family\",postTitle,n),A(\"Empty title or Content\");else{console.log(\"content \",n),console.log(\"title \",a),B(!0);var s=O+\"/\".concat(e.blogItem.id);console.log(\"this is the update api \",s),j()(s,{method:\"PUT\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+t},body:JSON.stringify({title:a,content:n,image_url:x,category:u,is_draft:I,is_published:_})}).then((function(e){return e.json()})).then((function(e){console.log(e),L.push(\"/admin/posts\"),B(!1)})).catch((function(e){B(!1),console.log(e)}))}},className:\"jsx-2430398980 btn btn-sm btn-accent ml-auto\"},w(\"i\",{className:\"jsx-2430398980 material-icons\"},\"file_copy\"),\" Update\")))))))),w(\"footer\",{className:\"jsx-2430398980 main-footer d-flex p-2 px-3 bg-white border-top\"},w(\"ul\",{className:\"jsx-2430398980 nav\"},w(\"li\",{className:\"jsx-2430398980 nav-item\"},w(\"a\",{href:\"#\",className:\"jsx-2430398980 nav-link\"},\"Home\")),w(\"li\",{className:\"jsx-2430398980 nav-item\"},w(\"a\",{href:\"#\",className:\"jsx-2430398980 nav-link\"},\"Services\")),w(\"li\",{className:\"jsx-2430398980 nav-item\"},w(\"a\",{href:\"#\",className:\"jsx-2430398980 nav-link\"},\"About\")),w(\"li\",{className:\"jsx-2430398980 nav-item\"},w(\"a\",{href:\"#\",className:\"jsx-2430398980 nav-link\"},\"Products\")),w(\"li\",{className:\"jsx-2430398980 nav-item\"},w(\"a\",{href:\"#\",className:\"jsx-2430398980 nav-link\"},\"Blog\"))),w(\"span\",{className:\"jsx-2430398980 copyright ml-auto my-auto mr-2\"},\"Copyright \\xa9 2018\",w(\"a\",{href:\"https://designrevision.com\",rel:\"nofollow\",className:\"jsx-2430398980\"},\"DesignRevision\")))),w(c.a,{id:\"2430398980\"},[\".files.jsx-2430398980 input.jsx-2430398980{outline:2px dashed #92b0b3;outline-offset:-10px;-webkit-transition:outline-offset .15s ease-in-out,background-color .15s linear;-webkit-transition:outline-offset .15s ease-in-out,background-color .15s linear;transition:outline-offset .15s ease-in-out,background-color .15s linear;padding:120px 0px 85px 35%;text-align:center !important;margin:0;width:100% !important;}\",\".files.jsx-2430398980 input.jsx-2430398980:focus{outline:2px dashed #92b0b3;outline-offset:-10px;-webkit-transition:outline-offset .15s ease-in-out,background-color .15s linear;-webkit-transition:outline-offset .15s ease-in-out,background-color .15s linear;transition:outline-offset .15s ease-in-out,background-color .15s linear;border:1px solid #92b0b3;}\",\".files.jsx-2430398980{position:relative;}\",'.files.jsx-2430398980:after{pointer-events:none;position:absolute;top:60px;left:0;width:50px;right:0;height:56px;content:\"\";background-image:url(https://image.flaticon.com/icons/png/128/109/109612.png);display:block;margin:0 auto;background-size:100%;background-repeat:no-repeat;}',\".color.jsx-2430398980 input.jsx-2430398980{background-color:#f1f1f1;}\",'.files.jsx-2430398980:before{position:absolute;bottom:10px;left:0;pointer-events:none;width:100%;right:0;height:57px;content:\" or drag it here. \";display:block;margin:0 auto;color:#2ea591;font-weight:600;text-transform:capitalize;text-align:center;}'])))};I.getInitialProps=function(){var e=Object(n.a)(o.a.mark((function e(t){var a,s,n,l,i,c,r,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b()(t).token,console.log(\"this is the token \",a),console.log(t.query),\"https://gwh3ump9m0.execute-api.us-east-2.amazonaws.com/prod/api/secret\",s={method:\"GET\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+a}},e.next=7,j()(\"https://gwh3ump9m0.execute-api.us-east-2.amazonaws.com/prod/api/secret\",s);case 7:return n=e.sent,e.next=10,n.json();case 10:if(l=e.sent,console.log(l),!l.valid){e.next=26;break}return console.log(\"valid token\"),i=t.query.id,c=O+\"\".concat(i),console.log(\"this is the API\",c),e.next=19,j()(O+\"/\".concat(i));case 19:return r=e.sent,e.next=22,r.json();case 22:return m=e.sent,e.abrupt(\"return\",{loggedIn:!0,blogItem:m});case 26:return console.log(\"invalid token\"),e.abrupt(\"return\",{loggedIn:!1,blogItem:l});case 28:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.default=I},pont:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/admin/editPost\",function(){return a(\"FBZP\")}])}},[[\"pont\",0,2,7,1,3,4,6]]]);","extractedComments":[]}